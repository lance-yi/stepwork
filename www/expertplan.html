<!DOCTYPE html>
<html>

<head lang="en">
	<meta charset="UTF-8">
	<meta name="renderer" content="webkit|ie-comp|ie-stand">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title></title>
	<link rel="stylesheet" type="text/css" href="../css/base.css"/>
	<link rel="stylesheet" type="text/css" href="../css/common.css" />
	<link rel="stylesheet" type="text/css" href="../css/page.css" />
	<script type="text/javascript" language="javascript" src="../js/jquery-1.11.3.min.js"></script>
	<script type="text/javascript" language="javascript" src="../js/layerModel.js"></script>
</head>

<body>
	<!-- 头部 -->
	<div class="header"></div>

	<div class="content expertplan clearfix">
		<div class="leftNav">
			<dl>
				<dt><i class="iconfont icon-cqssc"></i>重庆时时彩</dt>
				<dd class="cur" data-key="1" data-gmkey="1"><a href="expertplan.html?key=1&gmKey=1">定位胆个位杀</a></dd>
				<dd data-key="1" data-gmkey="2"><a href="expertplan.html?key=1&gmKey=2">龙虎玩法</a></dd>
				<dd data-key="1" data-gmkey="3"><a href="expertplan.html?key=1&gmKey=3">定位胆双胆杀</a></dd>
			</dl>
			<dl>
				<dt><i class="iconfont icon-3d"><img src="../images/default/3d.jpg" /></i>福彩3D</dt>
				<dd><a href="javascript:void(0);">二级菜单</a></dd>
				<dd><a href="javascript:void(0);">二级菜单</a></dd>
			</dl>
			<dl>
				<dt><i class="iconfont icon-115"><img src="../images/default/11-5.jpg" /></i>11选5</dt>
				<dd><a href="javascript:void(0);">二级菜单</a></dd>
			</dl>
			<dl>
				<dt><i class="iconfont icon-hunpk"></i>北京PK10</dt>
				<dd><a href="javascript:void(0);">二级菜单</a></dd>
			</dl>
			<dl>
				<dt><i class="iconfont icon-tengxunfenfencai"></i>腾讯分分彩</dt>
				<dd><a href="javascript:void(0);">二级菜单</a></dd>
			</dl>
		</div>
		<div class="rightPlan">
			<div class="nowprize clearfix">
				<div class="periods">
					<i class="iconfont icon-shijian"></i>
					<span id="nowStage">
						<!-- 当前期数 -->
					</span>
					<a href="trend.html"><em class="tip">走势图</em></a></div>
				<div class="num" id="nowOpenCode">
					<!-- 开奖号码 -->
				</div>
			</div>
			<div class="notic">
				<i><img src="../images/default/laba.png" /></i>正在进行计划，快来试试吧！</div>
			<div class="planList clearfix">
				<ul id="planeList">
					<!-- 计划内容 -->
				</ul>
			</div>
		</div>
	</div>
	<!-- footer -->
	<div class="lay-footer"></div>
	<!--登录/注册弹窗 start	-->
	<div class="dialog"></div>
	<!--登录/注册弹窗 end	-->
	<script type="text/javascript" language="javascript" src="../layer_mobile/layer.js"></script>
	<script type="text/javascript" language="javascript" src="../js/cookie.js"></script>
	<script type="text/javascript" language="javascript" src="../js/jqMD.js"></script>
	<script type="text/javascript" language="javascript" src="../js/config.js"></script>
	<script type="text/javascript" language="javascript" src="../js/base.js"></script>
	<script type="text/javascript" language="javascript" src="../js/request.js"></script>
	<script>
		$(document).ready(function () {

			CONFIG._isLoginSuccess();
			
			// 判断当前彩种并添加对应的样式
			var key = _Base.getQueryString("key");
			var gmKey = _Base.getQueryString("gmKey");
			$("[data-key]").removeClass("cur");
			var gmkeyList = $("[data-gmkey]");
			for (let i = 0; i < gmkeyList.length; i++) {
				if ($(gmkeyList[i]).data("gmkey") == gmKey) {
					$(gmkeyList[i]).addClass("cur");
				}
			}

			// 当前开奖号码
			function GetNowOpenCode(key) {
				Api.getNowOpenCode(key).then(function (res) {
					var list = res.oc_code.split(",");
					var numStr = '';
					list.forEach(function (item) {
						numStr += "<em>" + item + "</em>";
					});
					$("#nowOpenCode").html(numStr);
					$("#nowStage").html("<em>" + res.oc_expect.toString().substr(0, 8) + "-</em>" + res.oc_expect.toString().substr(
						-3) + "期");
				})
			}
			GetNowOpenCode(1);
			var nowOpenCodeInt = window.setInterval(function () {
				GetNowOpenCode(1)
			}, 10000);

			// 查询计划
			function GetExpertPlanList(key, gmKey) {
				var planeList = [];
				Api.getExpertPlanList(key, gmKey).then(function (res) {
					console.log(res)
					var evalArr = [],
						htmlStr = "";
						Object.keys(res[0]).forEach(function (key,index) {
						evalArr = res[0][key].split("\n");
						planeList[index] = $.extend({
							list: evalArr
						});
					});

					planeList.forEach(function (element, index) {
						htmlStr += '<li class="item">';
						// 返回内容有问题，删除数组前三个
						element.list.splice(0,3);
						element.list.forEach(function (item, _index) {
							htmlStr += '<div class="' + (_index % 2 == 0 ? "th" : "td") + '">' + item + '</div>';
						});
						htmlStr += '<div class="last clearfix"><em>方案' + _Base.returnChinese(index + 1) + '</em><i>准确率 ' + _Base.mathRound() +
							'</i></div></li>'
					})
					$("#planeList").html(htmlStr);
				})
			}
			GetExpertPlanList(key, gmKey);
			
		});
	</script>
</body>

</html>